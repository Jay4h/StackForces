# ========================================
# üèõÔ∏è PRAMAN PRODUCTION ENVIRONMENT
# ========================================
# CRITICAL: Never commit this file to version control
# Last Updated: 2026-01-18
# ========================================

# ========================================
# SERVER CONFIGURATION
# ========================================
PORT=3000
NODE_ENV=production

# ========================================
# DATABASE - MongoDB Replica Set
# ========================================
# Production MongoDB with replica set for 99.99% availability
MONGODB_URI=mongodb://pramanadmin:CHANGE_THIS_PASSWORD@mongodb-primary:27017,mongodb-secondary:27017,mongodb-arbiter:27017/praman?replicaSet=rs0&authSource=admin&retryWrites=true&w=majority
MONGODB_POOL_SIZE=50
MONGODB_TIMEOUT_MS=30000

# ========================================
# CACHE & SESSION - Redis Cluster
# ========================================
# Redis with AOF + RDB persistence for Kill Switch state
REDIS_URL=redis://:CHANGE_THIS_REDIS_PASSWORD@redis-cluster:6379
REDIS_CLUSTER_MODE=false
REDIS_TLS=false

# ========================================
# WEBAUTHN CONFIGURATION
# ========================================
# Replace with your production domain
RP_NAME=Praman
RP_ID=praman.gov.in
EXPECTED_ORIGIN=https://praman.gov.in

# Attestation validation (TPM/Secure Enclave enforcement)
WEBAUTHN_ATTESTATION_REQUIRED=true
WEBAUTHN_USER_VERIFICATION=required
WEBAUTHN_AUTHENTICATOR_ATTACHMENT=platform

# ========================================
# CRYPTOGRAPHIC CONFIGURATION
# ========================================
# CRITICAL: DO NOT CHANGE after production deployment
# Changing this will invalidate ALL existing DIDs
DID_SALT=PRAMAN_SOVEREIGN_INDIA_2026_PRODUCTION
ENCRYPTION_MASTER_KEY=CHANGE_THIS_256_BIT_KEY_XXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXXX

# PII Encryption at rest (AES-256-GCM)
PII_ENCRYPTION_ENABLED=true
PII_ENCRYPTION_ALGORITHM=aes-256-gcm

# ========================================
# SESSION & SECURITY
# ========================================
SESSION_TIMEOUT=1800000
SESSION_TOKEN_TTL=86400

# Rate Limiting (per IP)
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX_REQUESTS=100
RATE_LIMIT_WEBAUTHN_MAX=10

# Kill Switch TTL (Redis cache time for revocation checks)
KILL_SWITCH_TTL=300

# ========================================
# LOGGING & MONITORING
# ========================================
LOG_LEVEL=info
LOG_FILE_PATH=/var/log/praman/application.log
ENABLE_AUDIT_LOG=true
ENABLE_PII_REDACTION=true

# ========================================
# C++ NATIVE MODULE
# ========================================
CPP_MODULE_PATH=../../native_modules/ecosystem_core.node
CPP_FALLBACK_ENABLED=false

# ========================================
# SECURITY HEADERS (Helmet.js)
# ========================================
CSP_ENABLED=true
HSTS_MAX_AGE=31536000
FRAME_GUARD=deny

# ========================================
# DOCKER & CONTAINER
# ========================================
HEALTHCHECK_ENDPOINT=/status
GRACEFUL_SHUTDOWN_TIMEOUT=10000

# ========================================
# FEATURE FLAGS
# ========================================
ENABLE_REGISTRATION=true
ENABLE_HEALTH_PORTAL=true
ENABLE_AGRICULTURE_PORTAL=true
ENABLE_SMARTCITY_PORTAL=true
